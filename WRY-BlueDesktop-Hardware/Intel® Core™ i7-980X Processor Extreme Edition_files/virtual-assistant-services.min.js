var DsaConfig={appVersion:"Avaamo",baseApi:"/intel/v1.0/",pingCommand:"ping?",pingSendValue:100,serviceCheckUrls:["http://127.0.0.1:28385","http://127.0.0.1:28386","http://127.0.0.1:28387","http://127.0.0.1:28388","http://127.0.0.1:28389"]};DsaConfig.appVersionParameter="jsver\x3d"+DsaConfig.appVersion;DsaConfig.pingReturnValue=2*DsaConfig.pingSendValue;
var RequestResult=function(){return function(a){this.headers=a.getAllResponseHeaders();if("string"===typeof a.response)try{this.response=JSON.parse(a.response)}catch(c){this.response=void 0}else this.response=a.response;this.type=a.responseType;this.status=a.status;this.statusText=a.statusText}}(),DsaService={getAsync:function(a,c){return DsaService.requestAsync("GET",a,c,void 0,void 0)},requestAsync:function(a,c,h,f,e){return new Promise(function(g,d){var b=new XMLHttpRequest;b.open(a,c);void 0!==
e&&0<e&&(b.timeout=e);b.onload=function(){var a=new RequestResult(b);a.status&&200<=a.status&&300>a.status?g(a):d(a)};b.onerror=function(){var a=new RequestResult(b);d(a)};b.ontimeout=function(){var a=new RequestResult(b);d(a)};switch(h){case "json":b.responseType="json";break;case "text":b.responseType=""}b.send(f)})}},DsaDetect={startCheckingForService:function(a,c,h){var f=!1,e=DsaConfig.serviceCheckUrls.length,g=0;try{for(var d=0;d<DsaConfig.serviceCheckUrls.length;d++)DsaService.getAsync(""+
DsaConfig.serviceCheckUrls[d]+DsaConfig.baseApi+DsaConfig.pingCommand+"id\x3d"+DsaConfig.pingSendValue+"\x26"+DsaConfig.appVersionParameter,"json").then(function(b){if(!f)if(b&&b.response)if((b=b.response)&&b.id===DsaConfig.pingReturnValue)f=!0,a();else throw Error("Unexpected value returned from ping");else throw Error("Empty result from ping");}).catch(function(){g++;if(g===e)return c()})}catch(b){return h()}}},MESSAGE_EVENT_TYPE="message",AVAAMO_EVENT_ORIGIN="https://c0.avaamo.com";
function idsaCheck(a){window.DsaDetect&&window.DsaDetect.startCheckingForService(function(){a.source.postMessage("IDSA-STATUS:INSTALLED",a.origin)},function(){a.source.postMessage("IDSA-STATUS:NOT-INSTALLED",a.origin)},function(){a.source.postMessage("IDSA-STATUS:ERROR",a.origin)})}function messageReceiveHandler(a){a.origin===AVAAMO_EVENT_ORIGIN&&("detect-idsa"===a.data?idsaCheck(a):"init-login-from-va"===a.data&&"undefined"!==typeof intel.mytools&&intel.mytools.unifiedLogin())}
window.addEventListener(MESSAGE_EVENT_TYPE,messageReceiveHandler,!1);function invokeVirtualAssistant(a,c){isVaObjectAvailable()&&window.Avaamo.openChatBox(function(){setTimeout(function(){window.Avaamo.sendMessage(a,c)},500)})}function isVaObjectAvailable(){return typeof window.Avaamo!==UNDEFINED};