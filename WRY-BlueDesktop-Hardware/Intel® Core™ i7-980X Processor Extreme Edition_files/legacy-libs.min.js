(function(a){"object"===typeof module&&module.exports?module.exports=a():(window.Granite=window.Granite||{}).Sling=a()})(function(){return{SELECTOR_INFINITY:".infinity",CHARSET:"_charset_",STATUS:":status",STATUS_BROWSER:"browser",OPERATION:":operation",OPERATION_DELETE:"delete",OPERATION_MOVE:"move",DELETE_SUFFIX:"@Delete",TYPEHINT_SUFFIX:"@TypeHint",COPY_SUFFIX:"@CopyFrom",MOVE_SUFFIX:"@MoveFrom",ORDER:":order",REPLACE:":replace",DESTINATION:":dest",SAVE_PARAM_PREFIX:":saveParamPrefix",IGNORE_PARAM:":ignore",
REQUEST_LOGIN_PARAM:"sling:authRequestLogin",LOGIN_URL:"/system/sling/login.html",LOGOUT_URL:"/system/sling/logout.html"}});
(function(a){"object"===typeof module&&module.exports?module.exports=a():(window.Granite=window.Granite||{}).Util=a()})(function(){return{patchText:function(a,b){if(b)if("[object Array]"!==Object.prototype.toString.call(b))a=a.replace("{0}",b);else for(var c=0;c<b.length;c++)a=a.replace("{"+c+"}",b[c]);return a},getTopWindow:function(){var a=window;if(this.iFrameTopWindow)return this.iFrameTopWindow;try{for(;a.parent&&a!==a.parent&&a.parent.location.href;)a=a.parent}catch(b){}return a},setIFrameMode:function(a){this.iFrameTopWindow=
a||window},applyDefaults:function(){for(var a,b=arguments[0]||{},c=1;c<arguments.length;c++){a=arguments[c];for(var d in a){var e=a[d];a.hasOwnProperty(d)&&void 0!==e&&(b[d]=null===e||"object"!==typeof e||e instanceof Array?e instanceof Array?e.slice(0):e:this.applyDefaults(b[d],e))}}return b},getKeyCode:function(a){return a.keyCode?a.keyCode:a.which}}});
(function(a){"object"===typeof module&&module.exports?module.exports=a(require("@granite/util"),require("jquery")):window.Granite.HTTP=a(Granite.Util,jQuery)})(function(a,b){return function(){var c=null,d=/^(?:http|https):\/\/[^/]+(\/.*)\/(?:etc\.clientlibs|etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs|etc\/designs).*\.js(\?.*)?$/,e=/[^\w-.~%:/?[\]@!$&'()*+,;=]/,g=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,h=!1,f={getSchemeAndAuthority:function(a){if(!a)return"";
a=g.exec(a);return null===a?"":[a[1],a[3]].join("")},getContextPath:function(){null===c&&(c=f.detectContextPath());return c},detectContextPath:function(){try{if(window.CQURLInfo)c=CQURLInfo.contextPath||"";else{for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++){var e=d.exec(a[b].src);if(e)return c=e[1]}c=""}}catch(u){}return c},externalize:function(a){try{0===a.indexOf("/")&&f.getContextPath()&&0!==a.indexOf(f.getContextPath()+"/")&&(a=f.getContextPath()+a)}catch(m){}return a},
internalize:function(a,b){if("/"===a.charAt(0))return c===a?"":c&&0===a.indexOf(c+"/")?a.substring(c.length):a;b||(b=document);b=f.getSchemeAndAuthority(b.location.href);var d=f.getSchemeAndAuthority(a);return b===d?a.substring(d.length+(c?c.length:0)):a},getPath:function(a){if(a)a=f.removeParameters(a),a=f.removeAnchor(a);else{if(window.CQURLInfo&&CQURLInfo.requestPath)return CQURLInfo.requestPath;a=window.location.pathname}a=f.internalize(a);var c=a.indexOf(".",a.lastIndexOf("/"));-1!==c&&(a=a.substring(0,
c));return a},removeAnchor:function(a){var c=a.indexOf("#");return 0<=c?a.substring(0,c):a},removeParameters:function(a){var c=a.indexOf("?");return 0<=c?a.substring(0,c):a},encodePathOfURI:function(a){for(var c=["?","#"],b=[a],d,g=0,h=c.length;g<h;g++)if(d=c[g],0<=a.indexOf(d)){b=a.split(d);break}e.test(b[0])&&(b[0]=f.encodePath(b[0]));return b.join(d)},encodePath:function(a){a=encodeURI(a);a=a.replace(/%5B/g,"[").replace(/%5D/g,"]");a=a.replace(/\?/g,"%3F");return a=a.replace(/#/g,"%23")},handleLoginRedirect:function(){if(!h){h=
!0;alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));var c=a.getTopWindow().document.location;c.href=f.externalize("/")+"?resource\x3d"+encodeURIComponent(c.pathname+c.search+c.hash)}},getXhrHook:function(a,c,b){return window.G_XHR_HOOK&&"function"===typeof G_XHR_HOOK?(a={url:a,method:c||"GET"},b&&(a.params=b),G_XHR_HOOK(a)):null},eval:function(a){"object"!==typeof a&&(a=b.ajax({url:a,type:"get",async:!1}));try{return JSON.parse(a.body?a.body:a.responseText)}catch(m){}return null}};
return f}()});
(function(a){"object"===typeof module&&module.exports?module.exports=a(require("@granite/http")):window.Granite.I18n=a(window.Granite.HTTP)})(function(a){return function(){var b={},c="/libs/cq/i18n/dict.",d=".json",e=void 0,g=!1,h=null,f={},k=!1,m=function(a){if(k)return c+a+d;var b,e=document.querySelector("html");e&&(b=e.getAttribute("data-i18n-dictionary-src"));return b?b.replace("{locale}",encodeURIComponent(a)).replace("{+locale}",a):c+a+d};f.LOCALE_DEFAULT="en";f.PSEUDO_LANGUAGE="zz";f.PSEUDO_PATTERN_KEY=
"_pseudoPattern_";f.init=function(a){a=a||{};this.setLocale(a.locale);this.setUrlPrefix(a.urlPrefix);this.setUrlSuffix(a.urlSuffix)};f.setLocale=function(a){a&&(e=a)};f.getLocale=function(){"function"===typeof e&&(e=e());return e||document.documentElement.lang||f.LOCALE_DEFAULT};f.setUrlPrefix=function(a){a&&(c=a,k=!0)};f.setUrlSuffix=function(a){a&&(d=a,k=!0)};f.getDictionary=function(c){c=c||f.getLocale();if(!b[c]){g=0===c.indexOf(f.PSEUDO_LANGUAGE);try{var d=new XMLHttpRequest;d.open("GET",a.externalize(m(c)),
!1);d.send();b[c]=JSON.parse(d.responseText)}catch(q){}b[c]||(b[c]={})}return b[c]};f.get=function(a,c,b){var d;var e=f.getDictionary();var h=g?f.PSEUDO_PATTERN_KEY:b?a+" (("+b+"))":a;e&&(d=e[h]);d||(d=a);g&&(d=d.replace("{string}",a).replace("{comment}",b?b:""));a=d;if(c)if(Array.isArray(c))for(b=0;b<c.length;b++)a=a.replace("{"+b+"}",c[b]);else a=a.replace("{0}",c);return a};f.getVar=function(a,c){return a?f.get(a,null,c):null};f.getLanguages=function(){if(!h)try{var c=a.externalize("/libs/wcm/core/resources/languages.overlay.infinity.json"),
b=new XMLHttpRequest;b.open("GET",c,!1);b.send();var d=JSON.parse(b.responseText);Object.keys(d).forEach(function(a){a=d[a];a.language&&(a.title=f.getVar(a.language));a.title&&a.country&&"*"!==a.country&&(a.title+=" ("+f.getVar(a.country)+")")});h=d}catch(n){h={}}return h};f.parseLocale=function(a){if(!a)return null;var c=a.indexOf("_");0>c&&(c=a.indexOf("-"));if(0>c){var b=a;c=null}else b=a.substring(0,c),c=a.substring(c+1);return{code:a,language:b,country:c}};return f}()});
(function(a){"object"===typeof module&&module.exports?module.exports=a():(window.Granite=window.Granite||{}).TouchIndicator=a()})(function(){var a={},b=[];return{debugWithMouse:!1,init:function(){var a=this,b=function(c){a.update(c.touches);return!0};document.addEventListener("touchstart",b);document.addEventListener("touchmove",b);document.addEventListener("touchend",b);this.debugWithMouse&&document.addEventListener("mousemove",function(c){c.identifer="fake";a.update([c]);return!0})},update:function(c){for(var d=
{},e=0;e<c.length;e++){var g=c[e],h=g.identifier,f=a[h];f||(f=b.pop(),f||(f=document.createElement("div"),f.style.visibility="hidden",f.style.position="absolute",f.style.width="30px",f.style.height="30px",f.style.borderRadius="20px",f.style.border="5px solid orange",f.style.userSelect="none",f.style.opacity="0.5",f.style.zIndex="2000",f.style.pointerEvents="none",document.body.appendChild(f)));d[h]=f;f.style.left=g.pageX-20+"px";f.style.top=g.pageY-20+"px";f.style.visibility="visible"}for(h in a)a.hasOwnProperty(h)&&
!d[h]&&(f=a[h],f.style.visibility="hidden",b.push(f));a=d}}});
(function(a){"object"===typeof module&&module.exports?module.exports=a():(window.Granite=window.Granite||{}).OptOutUtil=a()})(function(a){return function(){var a={},c=[],d=[];a.init=function(a){a?(c=a.cookieNames||[],d=a.whitelistCookieNames||[]):(c=[],d=[])};a.getCookieNames=function(){return c};a.getWhitelistCookieNames=function(){return d};a.isOptedOut=function(){for(var c=document.cookie.split(";"),b=0;b<c.length;b++){var d=c[b].split("\x3d")[0];d=String.prototype.trim?d.trim():d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
"");if(0<=a.getCookieNames().indexOf(d))return!0}return!1};a.maySetCookie=function(c){return!(a.isOptedOut()&&-1===a.getWhitelistCookieNames().indexOf(c))};return a}()});Granite.OptOutUtil.init(window.GraniteOptOutConfig);Granite.HTTP.detectContextPath();
(function(a){a.Granite=a.Granite||{};a.Granite.HTTP=a.Granite.HTTP||{};var b=null;a.Granite.HTTP.externalize=a.Granite.HTTP.externalize||function(c){if(null===b)a:{var d=/^(?:http|https):\/\/[^/]+(\/.*)\/(?:etc\.clientlibs|etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs|etc\/designs).*\.js(\?.*)?$/;try{if(a.CQURLInfo)b=CQURLInfo.contextPath||"";else{for(var e=document.getElementsByTagName("script"),g=0;g<e.length;g++){var h=d.exec(e[g].src);if(h){b=h[1];break a}}b=""}}catch(f){}}try{0===
c.indexOf("/")&&b&&0!==c.indexOf(b+"/")&&(c=b+c)}catch(f){}return c}})(this);
(function(a){window.Granite.csrf||(window.Granite.csrf=a(window.Granite.HTTP))})(function(a){function b(){this._handler=[]}function c(a){var c="//"+document.location.host,b=document.location.protocol+c;return a===b||a.slice(0,b.length+1)===b+"/"||a===c||a.slice(0,c.length+1)===c+"/"||!/^(\/\/|http:|https:).*/.test(a)}function d(a){window.console&&console.warn("CSRF data not available;The data may be unavailable by design, such as during non-authenticated requests: "+a)}function e(){var a=new b;m=
a;var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState)try{l=JSON.parse(c.responseText).token,a.resolve(l)}catch(v){d(v),a.reject(c.responseText)}};c.open("GET",k,!0);c.send();return a}function g(){var a=new XMLHttpRequest;a.open("GET",k,!1);a.send();try{return l=JSON.parse(a.responseText).token}catch(p){d(p)}}function h(a){var b=a.getAttribute("action");"GET"===a.method.toUpperCase()||b&&!c(b)||(l||g(),l&&(b=a.querySelector('input[name\x3d":cq_csrf_token"]'),b||(b=document.createElement("input"),
b.setAttribute("type","hidden"),b.setAttribute("name",":cq_csrf_token"),a.appendChild(b)),b.setAttribute("value",l)))}function f(a){var c=function(a){a=a.target;"FORM"===a.nodeName&&h(a)};a.addEventListener?a.addEventListener("submit",c,!0):a.attachEvent&&a.attachEvent("submit",c)}b.prototype={then:function(a,c){this._handler.push({resolve:a,reject:c})},resolve:function(){this._execute("resolve",arguments)},reject:function(){this._execute("reject",arguments)},_execute:function(a,c){if(null===this._handler)throw Error("Promise already completed.");
for(var b=0,d=this._handler.length;b<d;b++)this._handler[b][a].apply(window,c);this.then=function(b,d){("resolve"===a?b:d).apply(window,c)};this._handler=null}};var k=a.externalize("/libs/granite/csrf/token.json"),m,l;f(document);var u=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(a,b,d){"get"!==a.toLowerCase()&&c(b)&&(this._csrf=!0,this._async=d);return u.apply(this,arguments)};var q=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){if(this._csrf)if(l)this.setRequestHeader("CSRF-Token",
l),q.apply(this,arguments);else if(!1===this._async)g(),l&&this.setRequestHeader("CSRF-Token",l),q.apply(this,arguments);else{var a=this,c=Array.prototype.slice.call(arguments);m.then(function(b){a.setRequestHeader("CSRF-Token",b);q.apply(a,c)},function(){q.apply(a,c)})}else q.apply(this,arguments)};var n=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){h(this);return n.apply(this,arguments)};if(window.Node){var r=Node.prototype.appendChild;Node.prototype.appendChild=function(){var a=
r.apply(this,arguments);if("IFRAME"===a.nodeName)try{a.contentWindow&&!a._csrf&&(a._csrf=!0,f(a.contentWindow.document))}catch(p){a.src&&a.src.length&&c(a.src)&&window.console&&console.error("Unable to attach CSRF token to an iframe element on the same origin")}return a}}e();setInterval(function(){e()},3E5);return{initialised:!1,refreshToken:e,_clearToken:function(){l=void 0;e()}}});
(function(a,b){b.Granite=b.Granite||{};b.Granite.$=b.Granite.$||a;b._g=b._g||{};b._g.$=b._g.$||a;var c=Granite.HTTP;a.ajaxSetup({externalize:!0,encodePath:!0,hook:!0,beforeSend:function(b,e){"undefined"!==typeof G_IS_HOOKED&&G_IS_HOOKED(e.url)||(e.externalize&&(e.url=c.externalize(e.url)),e.encodePath&&(e.url=c.encodePathOfURI(e.url)));e.hook&&(b=c.getXhrHook(e.url,e.type,e.data))&&(e.url=b.url,b.params&&("GET"===e.type.toUpperCase()?e.url+="?"+a.param(b.params):e.data=a.param(b.params)))},statusCode:{403:function(a){"Authentication Failed"===
a.getResponseHeader("X-Reason")&&c.handleLoginRedirect()}}});a.ajaxSettings.traditional=!0})(jQuery,this);window._g=window._g||{};_g.shared={};void 0===window.console&&(window.console={log:function(a){}});
_g.shared.HTTP=new function(){var a=function(){return{headers:{},body:{}}},b=function(c){if(!c)return null;var b=a();b.body=c.responseText;b.headers[_g.HTTP.HEADER_STATUS]=c.status;b.responseText=c.responseText;b.status=c.status;return b};return{EXTENSION_HTML:".html",EXTENSION_JSON:".json",EXTENSION_RES:".res",HEADER_STATUS:"Status",HEADER_MESSAGE:"Message",HEADER_LOCATION:"Location",HEADER_PATH:"Path",PARAM_NO_CACHE:"cq_ck",get:function(a,d,e,g){a=_g.HTTP.getXhrHookedURL(_g.HTTP.externalize(a,!0));
if(void 0!=d)return _g.$.ajax({type:"GET",url:a,externalize:!1,encodePath:!1,hook:!1,complete:function(a,c){a=b(a);g||_g.HTTP.handleForbidden(a);d.call(e||this,this,"success"==c,a)}});try{var c=_g.$.ajax({type:"GET",url:a,async:!1,externalize:!1,encodePath:!1,hook:!1}),f=b(c);g||_g.HTTP.handleForbidden(f);return f}catch(k){return null}},post:function(a,b,e,g,h,f){a=_g.HTTP.externalize(a,!0);if(h=_g.HTTP.getXhrHook(a,"POST",e))a=h.url,e=h.params;if(void 0!=b)return _g.$.ajax({type:"POST",url:a,data:e,
externalize:!1,encodePath:!1,hook:!1,complete:function(a,c){var d=_g.HTTP.buildPostResponseFromHTML(a.responseText);f||_g.HTTP.handleForbidden(a);b.call(g||this,this,"success"==c,d)}});try{var c=_g.$.ajax({type:"POST",url:a,data:e,async:!1,externalize:!1,encodePath:!1,hook:!1}),d=_g.HTTP.buildPostResponseFromHTML(c.responseText);f||_g.HTTP.handleForbidden(c);return d}catch(l){return null}},getParameter:function(a,b){a=_g.HTTP.getParameters(a,b);return null!=a?a[0]:null},getParameters:function(a,b){var c=
[];if(!b)return null;b=encodeURIComponent(b);if(-1==a.indexOf("?"))return null;-1!=a.indexOf("#")&&(a=a.substring(0,a.indexOf("#")));a=a.substring(a.indexOf("?")+1);if(-1==a.indexOf(b))return null;a=a.split("\x26");for(var d=0;d<a.length;d++){var h=a[d].split("\x3d");h[0]==b&&c.push(1<h.length?decodeURIComponent(h[1]):"")}return 0<c.length?c:null},addParameter:function(a,b,e){if(e&&e instanceof Array){for(var c=0;c<e.length;c++)a=_g.HTTP.addParameter(a,b,e[c]);return a}c=-1==a.indexOf("?")?"?":"\x26";
var d=a.indexOf("#");if(0>d)return a+c+encodeURIComponent(b)+"\x3d"+encodeURIComponent(e);var f=a.substring(d);a=a.substring(0,d);return a+c+encodeURIComponent(b)+"\x3d"+encodeURIComponent(e)+f},setParameter:function(a,b,e){a=_g.HTTP.removeParameter(a,b);return _g.HTTP.addParameter(a,b,e)},removeParameter:function(a,b){var c="?"+encodeURIComponent(b)+"\x3d";b="\x26"+encodeURIComponent(b)+"\x3d";if(-1==a.indexOf(c))if(-1!=a.indexOf(b))c=b;else return a;b=a.indexOf(c);c=a.substring(0,b);b=a.indexOf("\x26",
b+1);var d="";-1!=b&&(d=a.substring(b),0==d.indexOf("\x26")&&(d=d.replace("\x26","?")));return c+d},removeParameters:Granite.HTTP.removeParameters,addSelector:function(a,b,e){e||(e=0);var c="",d=a.indexOf("?");-1==d&&(d=a.indexOf("#"));-1!=d&&(c=a.substring(d),a=a.substring(0,d));var f=a.lastIndexOf("/");d=a.substring(f);if(-1==d.indexOf("."+b+".")){a=a.substring(0,f);d=d.split(".");var k=f="";if(e>d.length-2||-1==e)e=d.length-2;for(var m=0;m<d.length;m++)f+=k+d[m],k=".",e==m&&(f+=k+b);return a+f+
c}return a},setSelector:function(a,b,e){var c="",d=a.indexOf("?");-1==d&&(d=a.indexOf("#"));-1!=d&&(c=a.substring(d),a=a.substring(0,d));d=_g.HTTP.getSelectors(a);var f=a.substring(a.lastIndexOf("."));a=a.substring(0,a.lastIndexOf("."));a=0<d.length?a.replace("."+d.join("."),""):a;if(0<d.length)for(var k=0;k<d.length;k++)a=e==k?a+("."+b):a+("."+d[k]);else a+="."+b;return a+f+c},addSelectors:function(a,b){var c=a;if(a&&b&&b.length)for(a=0;a<b.length;a++)c=_g.HTTP.addSelector(c,b[a],a);return c},getAnchor:function(a){return-1!=
a.indexOf("#")?a.substring(a.indexOf("#")+1):""},setAnchor:function(a,b){return _g.HTTP.removeAnchor(a)+"#"+b},removeAnchor:Granite.HTTP.removeAnchor,noCaching:function(a){return _g.HTTP.setParameter(a,_g.HTTP.PARAM_NO_CACHE,(new Date).valueOf())},buildPostResponseFromNode:function(b,d){if(!b)return null;void 0==d&&(d=a());for(var c=0;c<b.childNodes.length;c++){var g=b.childNodes[c];g.tagName&&(g.id&&(d.headers[g.id]=g.href?g.href:g.innerHTML),d=_g.HTTP.buildPostResponseFromNode(g,d))}return d},buildPostResponseFromHTML:function(b){var c=
a();try{void 0!=b.responseText?b=b.responseText:"string"!=typeof b&&(b=b.toString());var e=document.createElement("div");e.innerHTML=b;c=_g.HTTP.buildPostResponseFromNode(e,c)}catch(g){}return c},getCookie:function(a){var b=encodeURIComponent(a)+"\x3d";a=document.cookie;if(0<a.length){var c=a.indexOf(b);if(-1!=c)return c+=b.length,b=a.indexOf(";",c),-1==b&&(b=a.length),decodeURIComponent(a.substring(c,b))}return null},setCookie:function(a,b,e,g,h,f){"number"!=typeof g&&(g=7);if(0<g){var c=new Date;
c.setTime(c.getTime()+864E5*g)}else c=new Date(0);document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+"; "+(0!=g?"expires\x3d"+c.toGMTString()+"; ":"")+(h?"domain\x3d"+h+"; ":"")+(e?"path\x3d"+e:"")+(f?"; secure":"");return b},clearCookie:function(a,b,e,g){_g.HTTP.setCookie(a,"null",b||"",-1,e||"",g||"")},getSchemeAndAuthority:Granite.HTTP.getSchemeAndAuthority,getContextPath:Granite.HTTP.getContextPath,externalize:function(a,b){if("undefined"!=typeof G_IS_HOOKED&&G_IS_HOOKED(a))return a;
b&&(a=_g.HTTP.encodePathOfURI(a));return a=Granite.HTTP.externalize(a)},internalize:Granite.HTTP.internalize,getPath:Granite.HTTP.getPath,getSuffix:function(){return window.CQURLInfo&&CQURLInfo.suffix?CQURLInfo.suffix:null},getSelectors:function(a){if(!a&&window.CQURLInfo&&CQURLInfo.selectors)return CQURLInfo.selectors;var b=[];a=a||window.location.href;a=_g.HTTP.removeParameters(a);a=_g.HTTP.removeAnchor(a);if(a=a.substring(a.lastIndexOf("/")))if(a=a.split("."),2<a.length)for(var c=0;c<a.length;c++)0<
c&&c<a.length-1&&b.push(a[c]);return b},getExtension:function(a){if(!a&&window.CQURLInfo&&CQURLInfo.extension)return CQURLInfo.extension;a=a||window.location.href;a=_g.HTTP.removeParameters(a);a=_g.HTTP.removeAnchor(a);var b=a.lastIndexOf(".");if(0>b)return"";a=a.substring(b+1);b=a.indexOf("/");return 0>b?a:a.substring(0,b)},encodePathOfURI:Granite.HTTP.encodePathOfURI,encodePath:Granite.HTTP.encodePath,eval:Granite.HTTP.eval,isOkStatus:function(a){try{return 0==(new String(a)).indexOf("2")}catch(d){return!1}},
isOk:function(a){try{return _g.HTTP.isOkStatus(a.headers[_g.HTTP.HEADER_STATUS])}catch(d){return!1}},handleForbidden:function(a,b){try{return 403==a[_g.HTTP.HEADER_STATUS.toLowerCase()]?(Granite.HTTP.handleLoginRedirect(),!0):!1}catch(e){return!1}},getXhrHook:Granite.HTTP.getXhrHook,getXhrHookedURL:function(a,b,e){return(b=_g.HTTP.getXhrHook(a,b,e))?b.url:a},reloadHook:function(a){"undefined"!=typeof G_RELOAD_HOOK&&_g.$.isFunction(G_RELOAD_HOOK)&&(""!=CQURLInfo.selectorString&&(a=_g.HTTP.addSelector(a,
CQURLInfo.selectorString)),a=G_RELOAD_HOOK(a)||a);return a}}};_g.HTTP=_g.shared.HTTP;
_g.shared.Util=new function(){return{reload:function(a,b,c){a||(a=window);b||(b=_g.HTTP.noCaching(a.location.href));b=_g.HTTP.reloadHook(b);c?a.location.replace(b):a.location.href=b},load:function(a,b){_g.Util.reload(window,a,b)},open:function(a,b,c,d){b||(b=window);if(a)return a=_g.HTTP.reloadHook(a),c||(c=""),d||(d=""),b.open(a,c,d)},htmlEncode:function(a){return a?String(a).replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):a},htmlDecode:function(a){return a?
String(a).replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"').replace(/&amp;/g,"\x26"):a},ellipsis:function(a,b,c){if(a&&a.length>b){if(c){c=a.substr(0,b-2);var d=Math.max(c.lastIndexOf(" "),c.lastIndexOf("."),c.lastIndexOf("!"),c.lastIndexOf("?"),c.lastIndexOf(";"));return-1==d||d<b-15?a.substr(0,b-3)+"...":c.substr(0,d)+"..."}return a.substr(0,b-3)+"..."}return a},patchText:Granite.Util.patchText,eval:function(a){return _g.HTTP.eval(a)},getTopWindow:Granite.Util.getTopWindow,
setIFrameMode:Granite.Util.setIFrameMode}};_g.Util=_g.shared.Util;
_g.shared.Sling=function(){return{SELECTOR_INFINITY:Granite.Sling.SELECTOR_INFINITY,CHARSET:Granite.Sling.CHARSET,STATUS:Granite.Sling.STATUS,STATUS_BROWSER:Granite.Sling.STATUS_BROWSER,OPERATION:Granite.Sling.OPERATION,OPERATION_DELETE:Granite.Sling.OPERATION_DELETE,OPERATION_MOVE:Granite.Sling.OPERATION_MOVE,DELETE_SUFFIX:Granite.Sling.DELETE_SUFFIX,TYPEHINT_SUFFIX:Granite.Sling.TYPEHINT_SUFFIX,COPY_SUFFIX:Granite.Sling.COPY_SUFFIX,MOVE_SUFFIX:Granite.Sling.MOVE_SUFFIX,ORDER:Granite.Sling.ORDER,
REPLACE:Granite.Sling.REPLACE,DESTINATION:Granite.Sling.DESTINATION,SAVE_PARAM_PREFIX:Granite.Sling.SAVE_PARAM_PREFIX,IGNORE_PARAM:Granite.Sling.IGNORE_PARAM,REQUEST_LOGIN_PARAM:Granite.Sling.REQUEST_LOGIN_PARAM,LOGIN_URL:Granite.Sling.LOGIN_URL,LOGOUT_URL:Granite.Sling.LOGOUT_URL,processBinaryData:function(a){if(a&&void 0!=a[":jcr:data"]){var b={};b.size=a[":jcr:data"];b.type=a["jcr:mimeType"];b.date=a["jcr:lastModified"];a=b}return a},getContentPath:function(a,b,c){b.lastIndexOf(".")>b.lastIndexOf("/")&&
(b=b.substr(0,b.indexOf(".",b.lastIndexOf("/"))));if(a)if(0==a.indexOf("/"))b=a;else{if(c)for(;0==a.indexOf("../");)a=a.substring(3),b=b.substring(0,b.lastIndexOf("/"));a=a.replace("./","");b=b+"/"+a}return b}}}();_g.Sling=_g.shared.Sling;
_g.shared.XSS=new function(){return{getXSSPropertyName:function(a){return a?_g.XSS.KEY_REGEXP.test(a)?a:a+_g.XSS.KEY_SUFFIX:""},getXSSRecordPropertyValue:function(a,b,c){var d="";a&&b&&(d=(d=a.get(this.getXSSPropertyName(b)))?d:this.getXSSValue(a.get(b)),c&&!isNaN(c)&&(d=_g.Util.ellipsis(d,c,!0)));return d},getXSSTablePropertyValue:function(a,b,c){var d="";a&&b&&(d=(d=a[this.getXSSPropertyName(b)])?d:this.getXSSValue(a[b]),c&&!isNaN(c)&&(d=_g.Util.ellipsis(d,c,!0)));return d},getXSSValue:function(a){return a?
_g.Util.htmlEncode(a):""},updatePropertyName:function(a,b){a&&b&&a[b]&&a.xssProtect&&!a.xssKeepPropName&&(a[b]=this.getXSSPropertyName(a[b]))},xssPropertyRenderer:function(a,b,c,d){return d&&d.dataIndex&&c&&c.data&&c.data[this.getXSSPropertyName(d.dataIndex)]?(a=c.data[this.getXSSPropertyName(d.dataIndex)],d.ellipsisLimit&&!isNaN(d.ellipsisLimit)&&(a=_g.Util.ellipsis(a,d.ellipsisLimit,!0)),a):a?a:""}}};_g.XSS=_g.shared.XSS;_g.XSS.KEY_SUFFIX="_xss";_g.XSS.KEY_REGEXP=new RegExp(_g.XSS.KEY_SUFFIX+"$");
_g.shared.I18n=Granite.I18n;_g.I18n=_g.shared.I18n;_g.shared.I18n.getMessage=Granite.I18n.get;_g.shared.I18n.getVarMessage=Granite.I18n.getVar;
_g.shared.String=new function(){return{startsWith:function(a,b){return null==a||null==b?null==a&&null==b:b.length>a.length?!1:0==a.toString().indexOf(b.toString())},endsWith:function(a,b){if(null==a||null==b)return null==a&&null==b;if(b.length>a.length)return!1;a=a.toString();b=b.toString();return a.lastIndexOf(b)==a.length-b.length},contains:function(a,b){if(null==a||null==b)return!1;a=a.toString();b=b.toString();return 0<=a.indexOf(b)}}};_g.String=_g.shared.String;
_g.shared.ClientSidePersistence=function(a){var b={PERSISTENCE_NAME:_g.shared.ClientSidePersistence.decoratePersistenceName("ClientSidePersistence"),config:{},cache:null,getMode:function(){return this.config.mode},getWindow:function(){return this.config.window||_g.shared.Util.getTopWindow()},debug:function(){if(console){for(var a=this.getMap(),b="[ClientSidePersistence -\x3e mode\x3d"+this.getMode().name+", container\x3d"+(this.config.container||"")+"]\n",c=0,h=new RegExp("^"+this.config.container+
"/"),f=0,k=Object.keys(a).sort();f<k.length;f++){var m=k[f];if(!this.config.container||"string"!=typeof m||m.match(h)){var l=a[m];b+="-["+ ++c+"]-\x3e '"+m.replace(h,"")+"' \x3d '"+decodeURIComponent(l)+"'\n"}}c||(b+="(container is empty)");console.log(b)}},keyName:function(a){return(this.config.container?this.config.container+"/":"")+a},getKeys:function(){var a=this.getMap(),b=[];if(a)for(var c in a)this.config.container?0==c.indexOf(this.config.container+"/")&&(a=c.substring(this.config.container.length+
1),b.push(a)):b.push(c);return b},get:function(a){return(a=this.getMap()[this.keyName(a)])?decodeURIComponent(a):a},set:function(a,b){a="string"===typeof a?a.replace(/:=/g,""):"";var c={key:a};a=this.keyName(a);if(a.length){var d=[],e=this.getMap();c.action=e[a]?"update":"set";b?e[a]=encodeURIComponent(b):(c.action="remove",delete e[a]);for(var k in e)d.push(k+":\x3d"+e[k]);this.cache=e;this.write(d.join("|"));_g.$.extend(c,{value:b,mode:this.getMode().name,container:this.config.container});_g.$(_g.shared.ClientSidePersistence).trigger(_g.shared.ClientSidePersistence.EVENT_NAME,
c)}},getMap:function(){if(!this.cache||!this.config.useCache){for(var a=this.read().split("|"),b={},c=0;c<a.length;c++){var h=a[c].split(":\x3d"),f=h[0];f&&f.length&&(b[f]=h[1]||"")}this.cache=b}return this.cache},remove:function(a){this.set(a)},clearMap:function(){this.write()},read:function(){return this.config.mode.read(this)||""},write:function(a){this.config.mode.write(this,a||"")}};_g.$.extend(b.config,_g.shared.ClientSidePersistence.getDefaultConfig(),a);!1===b.config.useContainer&&(b.config.container=
null);var c="test-"+Math.random();if(b.config.mode===_g.shared.ClientSidePersistence.MODE_SESSION){a=!1;try{window.sessionStorage.setItem(c,c),window.sessionStorage.removeItem(c)}catch(d){a=!0}a&&(b.config.mode=_g.shared.ClientSidePersistence.MODE_LOCAL)}if(b.config.mode===_g.shared.ClientSidePersistence.MODE_LOCAL){a=!1;try{window.localStorage.setItem(c,c),window.localStorage.removeItem(c)}catch(d){a=!0}a&&(b.config.mode=_g.shared.ClientSidePersistence.MODE_WINDOW)}return b};
_g.shared.ClientSidePersistence.EVENT_NAME="ClientSidePersistence";_g.shared.ClientSidePersistence.MODE_SESSION={name:"session",read:function(a){return a.getWindow().sessionStorage.getItem(a.PERSISTENCE_NAME)},write:function(a,b){if(!Granite.OptOutUtil.isOptedOut())try{a.getWindow().sessionStorage.setItem(a.PERSISTENCE_NAME,b)}catch(c){}}};
_g.shared.ClientSidePersistence.MODE_LOCAL={name:"local",read:function(a){return a.getWindow().localStorage.getItem(a.PERSISTENCE_NAME)},write:function(a,b){if(!Granite.OptOutUtil.isOptedOut())try{a.getWindow().localStorage.setItem(a.PERSISTENCE_NAME,b)}catch(c){}}};_g.shared.ClientSidePersistence.decoratePersistenceName=function(a){return a};
_g.shared.ClientSidePersistence.MODE_WINDOW={name:"window",read:function(a){return a.getWindow().name},write:function(a,b){Granite.OptOutUtil.isOptedOut()||(a.getWindow().name=b)}};
_g.shared.ClientSidePersistence.MODE_COOKIE={COOKIE_NAME:_g.shared.ClientSidePersistence.decoratePersistenceName("SessionPersistence"),name:"cookie",read:function(a){return _g.shared.ClientSidePersistence.CookieHelper.read(this.COOKIE_NAME)},write:function(a,b){if(!Granite.OptOutUtil.isOptedOut()||Granite.OptOutUtil.maySetCookie(this.COOKIE_NAME))b?_g.shared.ClientSidePersistence.CookieHelper.set(this.COOKIE_NAME,b,365):_g.shared.ClientSidePersistence.CookieHelper.erase(this.COOKIE_NAME)}};
_g.shared.ClientSidePersistence.getDefaultConfig=function(){return{window:_g.shared.Util.getTopWindow(),useCache:!1,container:null,mode:_g.shared.ClientSidePersistence.MODE_LOCAL}};
_g.shared.ClientSidePersistence.CookieHelper={set:function(a,b,c){var d="";c&&(d=new Date,d.setTime(d.getTime()+864E5*c),d="; expires\x3d"+d.toGMTString());b&&(b=encodeURIComponent(b));document.cookie=a+"\x3d"+b+d+"; path\x3d/"},read:function(a){a+="\x3d";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return(a=d.substring(a.length,d.length))?decodeURIComponent(a):null}return null},erase:function(a){_g.shared.ClientSidePersistence.CookieHelper.set(a,
"",-1)}};_g.shared.ClientSidePersistence.clearAllMaps=function(){_g.$.each([_g.shared.ClientSidePersistence.MODE_COOKIE,_g.shared.ClientSidePersistence.MODE_LOCAL,_g.shared.ClientSidePersistence.MODE_SESSION,_g.shared.ClientSidePersistence.MODE_WINDOW],function(a,b){(new _g.shared.ClientSidePersistence({mode:b})).clearMap()})};_g.I18n.init();window.CQ=window.CQ||{};CQ.shared=_g.shared;CQ.Sling=CQ.shared.Sling;CQ.I18n=CQ.shared.I18n;G_XHR_HOOK="undefined"!=typeof CQ_XHR_HOOK?CQ_XHR_HOOK:void 0;
G_RELOAD_HOOK="undefined"!=typeof CQ_RELOAD_HOOK?CQ_RELOAD_HOOK:void 0;G_IS_HOOKED="undefined"!=typeof CQ_IS_HOOKED?CQ_IS_HOOKED:void 0;G_CONTENT_PATH="undefined"!=typeof CQ_CONTENT_PATH?CQ_CONTENT_PATH:void 0;
CQ.shared.Form=function(){var a=function(){var a=parent.frames.ContentFrame,b={};a=(void 0!==a?a.contentDocument:document).getElementsByTagName("label");for(var c=0;c<a.length;c++){var d=a[c].htmlFor;d&&(b[d]=a[c])}return b},b=function(a){var b="",c=function(a){3==a.nodeType&&(b+=a.nodeValue);if("select"!=a.nodeName.toLowerCase()&&"input"!=a.nodeName.toLowerCase()&&"textarea"!=a.nodeName.toLowerCase()&&"button"!=a.nodeName.toLowerCase())for(var d=0;a.childNodes&&d<a.childNodes.length;d++)c(a.childNodes[d])};
c(a);return b},c=function(a){var b,c=a.nodeName.toLowerCase(),e=d(a,"type")?a.getAttribute("type"):void 0;"input"==c?"radio"==e||"checkbox"==e?d(a,"checked")&&(b=a.getAttribute("value")):b="text"==a.type?a.defaultValue:a.value:"textarea"==c?b=a.value:"option"==c&&d(a,"selected")&&(b=a.getAttribute("value"));return b},d=function(a,b){return null==a?!1:void 0!=$CQ(a).attr(b)};return{searchArray:function(a,b,c){for(var d=0;d<a.length;d++)if(a[d][b]&&a[d][b]==c)return a[d];return null},getLabelForField:function(c,
d){d||(d=a());var e=c.getAttribute("id");if(e&&d[e])return b(d[e]);for(d=c.parentNode;d;){if("label"==d.nodeName.toLowerCase())return b(d);d=d.parentNode}return c.getAttribute("name")},getFields:function(){var e=parent.frames.ContentFrame;e=void 0!==e?e.contentDocument:document;var g=a(),h=[],f=function(e,m,l){"div"==e.nodeName.toLowerCase()&&0<$CQ(e).children(".form_row").length&&(m=!0,l=$CQ(e).attr("class").replace(/\s/g,"."));if(e.getAttribute&&e.getAttribute("name")){var k=m,q=l,n=e.getAttribute("name"),
r=e.nodeName.toLowerCase();if("input"==r||"textarea"==r){var t=d(e,"type")?e.getAttribute("type").toLowerCase():"text";if("button"!=t&&"submit"!=t&&"reset"!=t){var p=CQ.shared.Form.searchArray(h,"value",n);p||(h.push({text:CQ.shared.Form.getLabelForField(e,g),value:n,name:n,enumeration:void 0,local:k,selector:q,type:r,defaultValue:c(e),node:e}),p=h[h.length-1]);if("radio"==t||p.local&&"checkbox"==t)p.enumeration||((k=e.getAttribute("id"))?(k=k.replace(/-\d+$/,""),(q=g)||(q=a()),k=q[k]?b(q[k]):null,
p.text=k?k:n):p.text=n,p.enumeration=[]),p.enumeration.push({text:CQ.shared.Form.getLabelForField(e,g),value:e.getAttribute("value"),defaultValue:c(e),node:e})}}else if("select"==r)for(h.push({text:CQ.shared.Form.getLabelForField(e,g),value:n,name:n,enumeration:[],local:k,type:r,selector:q,defaultValue:void 0,node:e}),p=h[h.length-1],n=e.getElementsByTagName("option"),k=0;k<n.length;k++)p.enumeration.push({text:n[k].innerHTML,value:n[k].getAttribute("value"),defaultValue:c(n[k]),node:n[k]})}for(p=
0;e.childNodes&&p<e.childNodes.length;p++)n=e.childNodes[p],1==n.nodeType&&f(n,m,l)};f(e,!1,void 0);return h}}}();
CQ.shared.User=function(a){return{data:null,language:null,userPropsPath:null,getUserPropsUrl:function(){this.userPropsPath||(this.userPropsPath=CQ.shared.User.PROXY_URI);return this.userPropsPath},load:function(){var a=this.getUserPropsUrl();a=CQ.shared.HTTP.noCaching(a);a=CQ.shared.HTTP.get(a);CQ.shared.HTTP.isOk(a)&&(this.data=CQ.shared.Util.eval(a))},init:function(a,c){if(!this.initialized||c)a?this.data=a:this.load(),this.initialized=!0;return this.data},lazyInit:function(){this.lazyLoad=function(){this.load();
this.initialized=!0}},isInitialized:function(){return this.initialized},getLanguage:function(){!this.isInitialized()&&this.lazyLoad&&this.lazyLoad.call(this);return this.language=this.data&&this.data.preferences&&this.data.preferences.language?this.data.preferences.language:"en"}}}();CQ.shared.User.PROXY_URI=CQ.shared.HTTP.externalize("/libs/cq/security/userinfo"+CQ.shared.HTTP.EXTENSION_JSON);CQ.shared.User.lazyInit();
CQ.shared.I18n.init({locale:function(){return document.documentElement.lang||CQ.shared.User.getLanguage()},urlPrefix:"/libs/cq/i18n/dict."});window.$CQ=_g.$;window.CQ_Analytics||(window.CQ_Analytics={});
CQ_Analytics.Utils=new function(){return{registerDocumentEventHandler:function(a,b){var c=window.document[a];window.document[a]="function"!=typeof window.document[a]?b:function(a){c&&c(a);b(a)}},eventWrapper:function(a){return function(b){if(document.all){var c=window.event.keyCode;b=window.event}else c="undefined"!=typeof b.which?b.which:0;b&&a(b,c)}},loadElement:function(a,b){$CQ("#"+b).load(a)},loadTeaserElement:function(a,b){var c=$CQ("#"+b).css("height"),d=$CQ("#"+b).height();0<d&&$CQ("#"+b).css("height",
d);var e=function(a){if(a&&""!=a){a=$CQ(a).css("display","none");var d=$CQ("#"+b)[0];$CQ("#"+b).empty().append(a);d&&d.parentElement&&$CQ(d.parentElement).trigger("target-dom-loaded");a.fadeIn(function(){c&&"0px"!=c&&$CQ("#"+b).css("height",c)})}else c&&"0px"!=c&&$CQ("#"+b).css("height",c)},g=function(a,b){CQ_Analytics.Utils.teasersCache||(CQ_Analytics.Utils.teasersCache={});CQ_Analytics.Utils.teasersCache[a]=b},h=function(){CQ_Analytics.Utils.teasersCache&&CQ_Analytics.Utils.teasersCache[a]?e(CQ_Analytics.Utils.teasersCache[a]):
(CQ_Analytics.Utils.teasersLoading=CQ_Analytics.Utils.teasersLoading||{},CQ_Analytics.Utils.teasersLoading[a]?window.setTimeout(function(){CQ_Analytics.Utils.loadTeaserElement(a,b)},100):(CQ_Analytics.Utils.teasersLoading[a]=!0,f()))},f=function(){var b=a,c=location.href;"undefined"!=typeof CQ_CONTENT_PATH&&(c=CQ_CONTENT_PATH);(c=CQ.shared.HTTP.getParameter(c,"wcmmode"))&&(b+=(0<b.indexOf("?")?"\x26":"?")+"wcmmode\x3d"+c);CQ.shared.HTTP.get(b,function(b,c,d){if(c){if(b=d.body)b=b.replace(/\n/ig,""),
b=b.replace(/\r/ig,""),g(a,b),delete CQ_Analytics.Utils.teasersLoading[a],h()}else g(a,"")})},k=$CQ("#"+b).children().length;if(0<k){var m=0;$CQ("#"+b).children().fadeOut(function(){var a=$CQ(this);window.setTimeout(function(){a.remove();m++;m>=k&&h()},50)})}else h()},clearElement:function(a){a&&$CQ("#"+a).html("")},indexOf:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]==b)return c;return-1},load:function(a,b,c){return CQ.shared.HTTP.get(a,b,c)},post:function(a,b,c,d){return CQ.shared.HTTP.post(a,
b,c,d)},getPagePath:function(){return CQ.shared.HTTP.getPath()},getPath:function(a){return CQ.shared.HTTP.getPath(a)},addParameter:function(a,b,c){return CQ.shared.HTTP.addParameter(a,b,c)},removeParameters:function(a){return CQ.shared.HTTP.removeParameters(a)},removeAnchor:function(a){return CQ.shared.HTTP.removeAnchor(a)},getSchemeAndAuthority:function(a){return CQ.shared.HTTP.getSchemeAndAuthority(a)},internalize:function(a,b){return CQ.shared.HTTP.internalize(b)},externalize:function(a,b){return CQ.shared.HTTP.externalize(a,
b)},encodePathOfURI:function(a){return CQ.shared.HTTP.encodePathOfURI(a)},encodePath:function(a){return CQ.shared.HTTP.encodePath(a)},getContextPath:function(){return CQ.shared.HTTP.getContextPath()},detectContextPath:function(){return CQ.shared.HTTP.detectContextPath()},urlEncode:function(a){if(!a)return"";if("string"==typeof a)return a;var b=[],c;for(c in a){var d=a[c],e=encodeURIComponent(c),g=typeof d;if("undefined"==g)b.push(e,"\x3d\x26");else if("function"!=g&&"object"!=g)b.push(e,"\x3d",encodeURIComponent(d),
"\x26");else if("array"==typeof d)if(d.length){g=0;for(var h=d.length;g<h;g++)b.push(e,"\x3d",encodeURIComponent(void 0===d[g]?"":d[g]),"\x26")}else b.push(e,"\x3d\x26")}b.pop();return b.join("")},getUID:function(){var a=Math.floor(Math.random()*(Math.pow(2,42)-1));return this.getTimestamp().toString(16)+a.toString(16)},getTimestamp:function(){return(new Date).getTime()},insert:function(a,b,c){if(!a||isNaN(b)||!c)return a;for(var d="",e=0,g=b;g<a.length;)d+=a.substring(e,g)+c,e+=b,g+=b;e<a.length&&
(d+=a.substring(e));return d},addListener:function(){return window.addEventListener?function(a,b,c,d){a.addEventListener(b,c,d)}:window.attachEvent?function(a,b,c,d){a.attachEvent("on"+b,c)}:function(){}},removeListener:function(){return window.removeEventListener?function(a,b,c,d){a.removeEventListener(b,c,d)}:window.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:function(){}}}};
CQ_Analytics.ClickstreamcloudRenderingUtils=new function(){return{createLink:function(a,b,c,d){var e=document.createElement("a");e.href=d;e.onclick=b;e.innerHTML=a;if(c)for(var g in c)c.hasOwnProperty(g)&&(e[g]=c[g]);return e},createStaticLink:function(a,b,c){var d=document.createElement("a");d.href=b;d.innerHTML=a;d.title=c;d.alt=c;return d},createNameValue:function(a,b,c,d){var e=document.createElement("span");e.className=c||"ccl-data";e.innerHTML=a+" \x3d "+b;e.title=d;e.alt=d;return e},createText:function(a,
b,c){var d=document.createElement("span");d.className=b||"ccl-data";a&&a.indexOf&&(-1!=a.indexOf("/home")&&-1!=a.indexOf("/image")||-1!=a.indexOf("/")&&-1!=a.indexOf(".png"))?d.innerHTML='\x3cimg src\x3d"'+a+'.prof.thumbnail.png" border\x3d"0"\x3e':a&&a.indexOf&&-1!=a.indexOf("www.gravatar.com")?d.innerHTML='\x3cimg src\x3d"'+a+'"\x3e':d.innerHTML=a;d.title=c;d.alt=c;return d},createEditablePropertySpan:function(a,b){var c="var editSpan \x3d this.parentNode; var readSpan \x3d this.parentNode.previousSibling;var newValue \x3d this.value;editSpan.style.display \x3d 'none'; readSpan.innerHTML \x3d '"+
a+" \x3d '+value; readSpan.style.display \x3d 'block';",d=document.createElement("span");d.innerHTML="\x3cspan class\x3d\"ccl-data\" onclick\x3d\"var editSpan \x3d this.nextSibling; this.style.display \x3d 'none'; editSpan.style.display \x3d 'block';\"\x3e"+a+" \x3d "+b+"\x3c/span\x3e";d.innerHTML+='\x3cspan class\x3d"ccl-data" style\x3d"display: none;"\x3e'+a+' \x3d \x3cinput class\x3d"ccl-input" type\x3d"text" value\x3d"'+b+'" onblur\x3d"'+c+'"\x3e\x3c/span\x3e';d.className="ccl-data";return d}}};
var generateURLSignature=function(a,b,c){if(a&&a.match(/^https?:\/\/maps\.googleapis\.com\//)){var d=a.replace(/^https?:\/\/[^/]*/,"").replace(/&amp;/g,"\x26");$CQ.ajax({url:CQ.shared.HTTP.externalize("/etc/cloudsettings/default/contexthub/geolocation.signature.json"),method:"get",dataType:"json",cache:!1,data:{url:d}}).done(function(a,d,h){h&&h.responseJSON?(a=this.baseURL.replace(/&amp;/g,"\x26"),a+="\x26client\x3d"+h.responseJSON.client,a+="\x26channel\x3d"+h.responseJSON.channel,a+="\x26signature\x3d"+
h.responseJSON.signature,b(a)):"function"===typeof c&&c()}.bind({baseURL:a})).fail(c)}else b(a)};
CQ_Analytics.ClientContextUtils=new function(){return{renderStoreProperty:function(a,b,c,d,e,g){if(CQ_Analytics&&CQ_Analytics.CCM)CQ_Analytics.CCM.onReady(function(){CQ_Analytics.ClientContextUtils.onStoreRegistered(b,function(){var h=CQ_Analytics.StoreRegistry.getStore(b);if(h){var f=function(){var b=h.getProperty(c)||g,f=$CQ("#"+a);if(!f.attr("contenteditable")||"inherit"==f.attr("contenteditable"))if("string"!=typeof b||(0!=b.indexOf("/")||-1==b.toLowerCase().indexOf(".png")&&-1==b.toLowerCase().indexOf(".jpg")&&
-1==b.toLowerCase().indexOf(".gif"))&&0!=b.toLowerCase().indexOf("http"))b=CQ_Analytics.Variables.replaceVariables(b),b=CQ_Analytics.isUIAvailable?b&&""!=b?b=d+b+e:CQ.I18n.getMessage("No",null,"Ex: No address, No keywords")+" "+c:b&&""!=b?b=d+b+e:"No "+c,f.html()!=b&&!1!==h.fireEvent("beforepropertyrender",h,a)&&(f.html(b),h.fireEvent("propertyrender",h,a));else if(b&&""!=b){var l="";l=0==f.parents(".cq-cc-thumbnail").length||0==b.toLowerCase().indexOf("http")||0==b.indexOf("/libs/wcm/mobile")?b.replace(/&amp;/g,
"\x26"):CQ.shared.HTTP.addParameter("/etc/clientcontext/shared/thumbnail/content.png","path",CQ_Analytics.Variables.replaceVariables(b));l=CQ_Analytics.Variables.replaceVariables(l);-1===(f.find("div").css("background-image")||"").indexOf(l+")")&&!1!==h.fireEvent("beforepropertyrender",h,a)&&generateURLSignature(CQ.shared.HTTP.externalize(l),function(b){f.html("");f.children().remove();$CQ("\x3cdiv\x3e").addClass("cq-cc-thumbnail-img").css("background-image","url("+b+")").appendTo(f);h.fireEvent("propertyrender",
h,a)})}else f.children().remove(),CQ_Analytics.isUIAvailable?f.html(CQ.I18n.getMessage("No",null,"Ex: No address, No keywords")+" "+c):f.html("No "+c)};!1!==h.fireEvent("beforeinitialpropertyrender",h,a)&&(f(),h.addListener&&h.addListener("update",function(){f()}),h.fireEvent("initialpropertyrender",h,a))}})})},renderStore:function(a,b){if(CQ_Analytics&&CQ_Analytics.CCM&&a&&b)CQ_Analytics.CCM.onReady(function(){CQ_Analytics.ClientContextUtils.onStoreRegistered(b,function(){var c=CQ_Analytics.StoreRegistry.getStore(b);
if(c){c.divId=a;var d=function(){!1!==c.fireEvent("beforerender",c,c.divId)&&(c.renderer(c,c.divId),c.fireEvent("render",c,c.divId))};!1!==c.fireEvent("beforeinitialrender",c,a)&&(d(),c.addListener&&c.addListener("update",function(){d()}),c.fireEvent("initialrender",c,a))}})})},storesOptionsProvider:function(){var a=[],b=CQ_Analytics.StoreRegistry.getStores(),c;for(c in b)a.push({value:c});return a},storePropertiesOptionsProvider:function(a,b){var c=[];if(a=CQ_Analytics.StoreRegistry.getStore(a))for(var d=
a.getPropertyNames(),e=0;e<d.length;e++){var g=d[e];if(!CQ.shared.XSS.KEY_REGEXP.test(g)){var h={value:g};b&&(h.text=g+" - "+a.getProperty(g));c.push(h)}}return c},onStoreRegistered:function(a,b){if(b){var c=CQ_Analytics.StoreRegistry.getStore(a);c?b.call(c,c):CQ_Analytics.CCM.addListener("storeregister",function(c,e){e.getName()==a&&b.call(e,e)})}},onStoreInitialized:function(a,b,c){!0===c&&(c=CQ_Analytics.ClientContextUtils.DEFAULT_INIT_DELAY);var d=function(){var d=CQ_Analytics.StoreRegistry.getStore(a);
d.DELAYED_INIT_TIMEOUT&&(window.clearTimeout(d.DELAYED_INIT_TIMEOUT),d.DELAYED_INIT_TIMEOUT=null);0<c?d.DELAYED_INIT_TIMEOUT=window.setTimeout(function(){d.DELAYED_INIT_TIMEOUT=null;b.call(d,"initialize",d)},c):b.call(d,"initialize",d)},e=CQ_Analytics.StoreRegistry.getStore(a);e?e.isInitialized()?(d.call(e),e.addListener("initialize",function(a,b){d.call(b)})):e.addListener("initialize",function(a,b){d.call(b)}):CQ_Analytics.CCM.addListener("storeregister",function(d,e){if(e.getName()==a)CQ_Analytics.ClientContextUtils.onStoreInitialized(a,
b,c)})},init:function(a,b,c){CQ_Analytics.ClientContextMgr.PATH=a;CQ_Analytics.ClientContextMgr.loadConfig(c,!0);$CQ.ajax({url:CQ.shared.HTTP.externalize(a+"/content/jcr:content/stores.init.js"),cache:!1,async:!0,dataType:"script",data:{path:b}})},initUI:function(a,b,c){CQ_Analytics.ClientContextUI.create(a,b,c)}}};CQ_Analytics.ClientContextUtils.DEFAULT_INIT_DELAY=200;
CQ_Analytics.Variables=new function(){return{containsVariable:function(a){return 0<CQ_Analytics.Variables.getVariables(a).length},getVariables:function(a){return a&&"string"==typeof a?(a=a.match(/\$\{([\w/]*)\}/ig))?a:[]:[]},replaceVariables:function(a){if(!a)return a;var b="",c=a;for(a=CQ_Analytics.Variables.getVariables(a);0<a.length&&-1==b.indexOf(a.join());){for(var d=0;d<a.length;d++){var e=CQ_Analytics.Variables.getPropertyPath(a[d]),g=CQ_Analytics.ClientContext.get(e)||"";c=CQ_Analytics.Variables.replace(c,
e,g)}b+=a.join();a=CQ_Analytics.Variables.getVariables(c)}return c},getPropertyPath:function(a){return!a||2>a.length?null:a.substring(2,a.length-1)},getPropertyName:function(a){if(a=CQ_Analytics.Variables.getPropertyPath(a))if(a=a.split("/"),3==a.length)return a[2];return null},getStoreName:function(a){if(a=CQ_Analytics.Variables.getPropertyPath(a))if(a=a.split("/"),1<a.length)return a[1];return null},replace:function(a,b,c){return a.replace(new RegExp("\\$\\{"+b+"\\}","ig"),c)}}};
CQ_Analytics.SessionPersistence=CQ.shared.ClientSidePersistence;CQ_Analytics.Cookie=CQ.shared.ClientSidePersistence.CookieHelper;CQ_Analytics.Observable=function(){this.fireEvent=function(a){if(a&&this.listeners&&!this.suppressEvents){a=a.toLowerCase();for(var b=Array.prototype.slice.call(arguments,0),c=this.listeners.slice(0),d=0;d<c.length;d++){var e=c[d];if(a==e.event&&!1===e.fireFn.apply(e.scope||this||window,b))return!1}}return!0}};
CQ_Analytics.Observable.prototype.addListener=function(a,b,c){this.listeners=this.listeners||[];a&&b&&this.listeners.push({event:a.toLowerCase(),fireFn:b,scope:c})};CQ_Analytics.Observable.prototype.removeListener=function(a,b){this.listeners=this.listeners||[];if(a&&b)for(var c=0;c<this.listeners.length;c++)this.listeners[c].event==a&&this.listeners[c].fireFn==b&&this.listeners.splice(c,1)};CQ_Analytics.Observable.prototype.setSuppressEvents=function(a){this.suppressEvents=a};
CQ_Analytics.Observable.prototype.listeners=null;CQ_Analytics.Observable.prototype.suppressEvents=!1;CQ_Analytics.StoreRegistry||(CQ_Analytics.StoreRegistry=new function(){var a={};return{register:function(b){b.STORENAME&&(a[b.STORENAME]=b)},getStores:function(){return a},getStore:function(b){return a[b]}}});CQ_Analytics.SessionStore=function(){};CQ_Analytics.SessionStore.prototype=new CQ_Analytics.Observable;
CQ_Analytics.SessionStore.prototype.setProperty=function(a,b){null==this.data&&this.init();this.data[a]=b;this.fireEvent("update",a)};CQ_Analytics.SessionStore.prototype.setProperties=function(a){null==this.data&&this.init();var b=[],c;for(c in a)a.hasOwnProperty(c)&&(b.push(c),this.data[c]=a[c]);0<b.length&&this.fireEvent("update",b)};CQ_Analytics.SessionStore.prototype.initialized=!1;CQ_Analytics.SessionStore.prototype.init=function(){this.initialized=!0;this.fireEvent("initialize",this)};
CQ_Analytics.SessionStore.prototype.getLabel=function(a){return a};CQ_Analytics.SessionStore.prototype.getLink=function(a){return a};CQ_Analytics.SessionStore.prototype.removeProperty=function(a){null==this.data&&this.init();this.data[a]&&delete this.data[a];this.fireEvent("update",a)};CQ_Analytics.SessionStore.prototype.getPropertyNames=function(a){null==this.data&&this.init();a=a?a:[];var b=[],c;for(c in this.data)-1==CQ_Analytics.Utils.indexOf(a,c)&&b.push(c);return b};
CQ_Analytics.SessionStore.prototype.getSessionStore=function(){return this};CQ_Analytics.SessionStore.prototype.clear=function(){this.data=null};CQ_Analytics.SessionStore.prototype.getData=function(a){null==this.data&&this.init();if(a){var b={},c;for(c in this.data)-1==CQ_Analytics.Utils.indexOf(a,c)&&(b[c]=this.data[c]);return b}return this.data};CQ_Analytics.SessionStore.prototype.reset=function(){null!=this.data&&(this.data=null,this.fireEvent("update"))};
CQ_Analytics.SessionStore.prototype.getProperty=function(a,b){null==this.data&&this.init();a=this.data[a];return b?a:CQ.shared.XSS.getXSSValue(a)};CQ_Analytics.SessionStore.prototype.getName=function(){return this.STORENAME};CQ_Analytics.SessionStore.prototype.addInitProperty=function(a,b){this.initProperty||(this.initProperty={});this.initProperty[a]=b};CQ_Analytics.SessionStore.prototype.getInitProperty=function(a){return this.initProperty?this.initProperty[a]:null};
CQ_Analytics.SessionStore.prototype.loadInitProperties=function(a,b){if(a)for(var c in a)this.addInitProperty(c,a[c]),b&&this.data&&void 0===this.data[c]&&this.setProperty(c,a[c])};CQ_Analytics.SessionStore.prototype.isInitialized=function(){return this.initialized};CQ_Analytics.PersistedSessionStore=function(){};CQ_Analytics.PersistedSessionStore.prototype=new CQ_Analytics.SessionStore;CQ_Analytics.PersistedSessionStore.prototype.STOREKEY="key";
CQ_Analytics.PersistedSessionStore.prototype.setNonPersisted=function(a){this.nonPersisted||(this.nonPersisted={});this.nonPersisted[a]=!0};CQ_Analytics.PersistedSessionStore.EXCLUDED_PROPERTIES_REGEX="^generated*";CQ_Analytics.PersistedSessionStore.prototype.isPersisted=function(a){this.nonPersisted||(this.nonPersisted={});return!0!==this.nonPersisted[a]&&!(new RegExp(CQ_Analytics.PersistedSessionStore.EXCLUDED_PROPERTIES_REGEX,"ig")).test(a)&&!$CQ.isFunction(this.data[a])&&"object"!=typeof this.data[a]};
CQ_Analytics.PersistedSessionStore.prototype.getStoreKey=function(){return this.STOREKEY};CQ_Analytics.PersistedSessionStore.prototype.persist=function(){!1!==this.fireEvent("beforepersist")&&((new CQ_Analytics.SessionPersistence({container:"ClientContext"})).set(this.getStoreKey(),this.toString()),this.fireEvent("persist"))};
CQ_Analytics.PersistedSessionStore.prototype.setProperty=function(a,b){null==this.data&&this.init();this.data[a]=b;this.isPersisted(a)&&this.persist();this.fireEvent("update",a)};CQ_Analytics.PersistedSessionStore.prototype.setProperties=function(a){null==this.data&&this.init();var b=[],c=!1,d;for(d in a)a.hasOwnProperty(d)&&(b.push(d),this.data[d]=a[d],this.isPersisted(d)&&(c=!0));c&&this.persist();0<b.length&&this.fireEvent("update",b)};
CQ_Analytics.PersistedSessionStore.prototype.toString=function(){var a=null;if(this.data)for(var b in this.data)if(this.isPersisted(b)&&this.data.hasOwnProperty(b)){a=null===a?"":a+",";var c=b+"\x3d",d;(d=this.data[b])&&"string"==typeof d&&(d=d.replace(/,/g,"\x26#44;"),d=d.replace(/=/g,"\x26#61;"),d=d.replace(/\|/g,"\x26#124;"));a+=c+d}return a};
CQ_Analytics.PersistedSessionStore.prototype.parse=function(a){var b={};a=a.split(",");for(var c in a)if(a.hasOwnProperty(c)){var d=a[c].split("\x3d");if(2==d.length){var e=d[0];(d=d[1])&&"string"==typeof d&&(d=d.replace(/&#44;/g,","),d=d.replace(/&#61;/g,"\x3d"),d=d.replace(/&#124;/g,"|"));b[e]=d}}return b};CQ_Analytics.PersistedSessionStore.prototype.reset=function(a){null!=this.data&&(this.data={},this.persist(),this.data=null,a||this.fireEvent("update"))};
CQ_Analytics.PersistedSessionStore.prototype.removeProperty=function(a){null==this.data&&this.init();this.data[a]&&(delete this.data[a],this.isPersisted(a)&&this.persist());this.fireEvent("update",a)};CQ_Analytics.PersistedSessionStore.prototype.clear=function(){(new CQ_Analytics.SessionPersistence({container:"ClientContext"})).remove(this.getStoreKey());this.data=null};
CQ_Analytics.ClientContextMgr||(CQ_Analytics.ClientContextMgr=function(){this.clientcontextToServer=this.clientcontext=null;this.stores={};this.config=this.data=null;this.areStoresLoaded=this.isConfigLoaded=!1},CQ_Analytics.ClientContextMgr.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.ClientContextMgr.prototype.STOREKEY="CLIENTCONTEXT",CQ_Analytics.ClientContextMgr.prototype.STORENAME="clientcontext",CQ_Analytics.ClientContextMgr.prototype.INITIALIZATION_EVENT_TIMER=1E3,CQ_Analytics.ClientContextMgr.prototype.CONFIG_PATH=
CQ_Analytics.Utils.externalize("/etc/clientcontext/legacy/config.json",!0),CQ_Analytics.ClientContextMgr.prototype.init=function(){this.initialized||(this.clientcontext={},this.clientcontextToServer={});var a=(new CQ_Analytics.SessionPersistence({container:"ClientContext"})).get(this.getStoreKey());this.data=a?this.parse(a):{};this.initialized=!0;this.fireEvent("initialize",this)},CQ_Analytics.ClientContextMgr.prototype.getSessionId=function(){this.data.sessionId||this.setSessionId(CQ_Analytics.Utils.getUID());
return this.data.sessionId},CQ_Analytics.ClientContextMgr.prototype.setSessionId=function(a){a&&this.setProperty("sessionId",a)},CQ_Analytics.ClientContextMgr.prototype.getVisitorId=function(){return this.data.visitorId},CQ_Analytics.ClientContextMgr.prototype.setVisitorId=function(a){this.setProperty("visitorId",a)},CQ_Analytics.ClientContextMgr.prototype.getId=function(){var a=this.getVisitorId();return a?a:this.getSessionId()},CQ_Analytics.ClientContextMgr.prototype.isAnonymous=function(){return!this.getVisitorId()},
CQ_Analytics.ClientContextMgr.prototype.isMode=function(a){return CQ_Analytics.ClientContextMgr.ServerStorage.isMode(a)},CQ_Analytics.ClientContextMgr.prototype.get=function(a){null==this.clientcontext&&this.init();return a?this.clientcontextToServer:this.clientcontext},CQ_Analytics.ClientContextMgr.prototype.register=function(a){null==this.clientcontext&&this.init();var b=this;this.clientcontext[a.getName()]=a.getData();this.stores[a.getName()]=a;CQ_Analytics.StoreRegistry.register(a);var c=this.getStoreConfig(a.getName());
!1!==c.stats&&"false"!=c.stats&&(this.clientcontextToServer[a.getName()]=a.getData(c.excludedFromStats));this.initTimer&&(window.clearTimeout(this.initTimer),this.initTimer=null);this.initTimer=window.setTimeout(function(){b.fireEvent("storesinitialize");b.areStoresInitialized=!0},this.isConfigLoaded&&"undefined"!==typeof this.config.initializationEventTimer?this.config.initializationEventTimer:this.INITIALIZATION_EVENT_TIMER);a.addListener("update",function(){b.update(a)});CQ_Analytics.ClientContextMgr.ServerStorage.handleStoreRegistration(a);
this.addListener("clear",function(){a.clear()});this.fireEvent("storeregister",a);this.fireEvent("storeupdate",a)},CQ_Analytics.ClientContextMgr.prototype.update=function(a){null==this.clientcontext&&this.init();this.clientcontext[a.getName()]=a.getData();var b=this.getStoreConfig(a.getName());!1!==b.stats&&"false"!=b.stats&&(this.clientcontextToServer[a.getName()]=a.getData(b.excludedFromStats));this.fireEvent("storeupdate",a)},CQ_Analytics.ClientContextMgr.prototype.startPosting=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.startPosting()},
CQ_Analytics.ClientContextMgr.prototype.stopPosting=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.stopPosting()},CQ_Analytics.ClientContextMgr.prototype.post=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.post()},CQ_Analytics.ClientContextMgr.prototype.getCCMToJCR=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.getCCMToJCR()},CQ_Analytics.ClientContextMgr.prototype.getName=function(){return this.STORENAME},CQ_Analytics.ClientContextMgr.prototype.clear=
function(){this.clientcontextToServer=this.clientcontext=null;this.fireEvent("clear")},CQ_Analytics.ClientContextMgr.prototype.getRegisteredStore=function(a){return this.stores&&this.stores[a]?this.stores[a]:null},CQ_Analytics.ClientContextMgr.prototype.loadConfig=function(a,b){var c=function(a,b){"undefined"===typeof b&&(b={});a.config=b;a.isConfigLoaded=!0;a.fireEvent("configloaded");a.fireEvent("storesloaded");a.areStoresLoaded=!0};a?c(this,a):b?c(this,{}):(a={},a.path=CQ_Analytics.Utils.getPagePath(),
a.cq_ck=(new Date).valueOf(),b=this.CONFIG_PATH,b+="?"+CQ_Analytics.Utils.urlEncode(a),CQ_Analytics.Utils.load(b,function(a,b,g){a={};try{a=eval("config \x3d "+g.responseText)}catch(h){}c(this,a)},this))},CQ_Analytics.ClientContextMgr.prototype.getConfig=function(){return this.config},CQ_Analytics.ClientContextMgr.prototype.getStoreConfig=function(a){return this.config&&this.config.configs&&this.config.configs[a]&&this.config.configs[a].store?this.config.configs[a].store:{}},CQ_Analytics.ClientContextMgr.prototype.getEditConfig=
function(a){return this.config&&this.config.configs&&this.config.configs[a]&&this.config.configs[a].edit?this.config.configs[a].edit:{}},CQ_Analytics.ClientContextMgr.prototype.getUIConfig=function(a){return this.config&&this.config.configs&&this.config.configs[a]&&this.config.configs[a].ui?this.config.configs[a].ui:{}},CQ_Analytics.ClientContextMgr.prototype.getInitialData=function(a){return this.config&&this.config.data&&this.config.data[a]?this.config.data[a]:{}},CQ_Analytics.ClientContextMgr.prototype.getStores=
function(){return this.stores},CQ_Analytics.ClientContextMgr.prototype.onReady=function(a,b){a&&(this.areStoresLoaded?a.call(b):this.addListener("storesloaded",a,b))},CQ_Analytics.ClientContextMgr=new CQ_Analytics.ClientContextMgr,CQ_Analytics.CCM=CQ_Analytics.ClientContextMgr,CQ_Analytics.ClickstreamcloudMgr=CQ_Analytics.CCM,CQ_Analytics.ContextCloudMgr=CQ_Analytics.CCM,CQ_Analytics.ClientContextMgr.PATH=null,CQ_Analytics.ClientContextMgr.getClientContextURL=function(a){return CQ_Analytics.ClientContextMgr.PATH+
a},window.setTimeout(function(){CQ_Analytics.CCM.init()},1),CQ_Analytics.Utils.addListener(window,"unload",function(){try{for(var a in CQ_Analytics.ClientContextMgr)delete CQ_Analytics.ClientContextMgr[a];CQ_Analytics.ClientContextMgr=null}catch(b){}CQ_Analytics.CCM=null}));
window.CQ_Analytics&&window.CQ_Analytics.ClientContextMgr&&!window.CQ_Analytics.ClientContextMgr.ServerStorage&&(CQ_Analytics.ClientContextMgr.ServerStorage=function(){this.initialized=this.posting=!1},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_PAGELOAD=1,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_TIMER=2,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_DATAUPDATE=4,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_TIMER=600,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_PROCESS_TIMER=
60,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE=6,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_PATH="/var/statistics/",CQ_Analytics.ClientContextMgr.ServerStorage.prototype.init=function(){if(this.isMode(CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_TIMER)){var a=this;(function(){a.timer=window.setInterval(function(){try{var b=parseInt(a.data.lastPost),c=!1;isNaN(b)?c=!0:(new Date).getTime()>b+1E3*CQ_Analytics.ClientContextMgr.ServerStorage.POST_TIMER&&(c=
!0)}catch(d){}c&&a.post()},1E3*CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER)}).call(this)}this.initialized=!0},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.isMode=function(a){return 0<(CQ_Analytics.CCM.POST_MODE&a)},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.handleStoreRegistration=function(a){this.initialized||this.init();this.isMode(CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_DATAUPDATE)&&a.addListener("persist",function(){CQ_Analytics.ClientContextMgr.ServerStorage.post(a)})},
CQ_Analytics.ClientContextMgr.ServerStorage.prototype.startPosting=function(){this.posting=!0},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.stopPosting=function(){this.posting=!1},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.post=function(a,b){if(this.posting||b)try{var c=this.getCCMToJCR(a),d=CQ_Analytics.Utils.getTimestamp();c["./jcr:primaryType"]="nt:unstructured";c["./sessionId"]=CQ_Analytics.CCM.getSessionId();var e=this.POST_PATH+"clientcontext/";if(CQ_Analytics.CCM.isAnonymous()){var g=
CQ_Analytics.Utils.insert(CQ_Analytics.CCM.getId(),2,"/");e+="anonymous/"+g+"/"+d}else e+="users/"+CQ_Analytics.CCM.getId()+"/"+d;CQ_Analytics.Utils.post(e,null,c);this.lastPost=d}catch(h){}},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.getCCMToJCR=function(a){var b=CQ_Analytics.CCM.get(!0),c={},d;for(d in b)if(!a||d==a){var e=b[d];encodeURIComponent(d);if("object"==typeof e)for(var g in e){var h=e[g];g=g.replace(":","/");c["./"+d+"/./"+g]=h}else c["./"+d]=e}return c},CQ_Analytics.ClientContextMgr.ServerStorage=
new CQ_Analytics.ClientContextMgr.ServerStorage,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_PAGELOAD=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_PAGELOAD,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_TIMER=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_DATAUPDATE=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_DATAUPDATE,CQ_Analytics.ClickstreamcloudMgr.POST_TIMER=CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_PROCESS_TIMER=
CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_MODE=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE,CQ_Analytics.ClickstreamcloudMgr.POST_PATH=CQ_Analytics.ClientContextMgr.ServerStorage.POST_PATH);
CQ_Analytics.SegmentMgr||(CQ_Analytics.SegmentMgr=function(){this.SEGMENTATION_ROOT="/etc/segmentation";this.SEGMENT_SELECTOR=".segment.js";this.SEGMENTATION_SCRIPT_LOADER="cq-segmentation-loader";this.segments={};this.boosts={};var a=this;this.fireUpdate=function(){a.fireEvent("update")};this.init()},CQ_Analytics.SegmentMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.SegmentMgr.prototype.STORENAME="segments",CQ_Analytics.SegmentMgr.prototype.register=function(a,b,c){this.segments[a]=b;this.rulesCache&&
this.rulesCache[a]&&(this.rulesCache[a]=!1);this.boosts[a]=isNaN(c)?0:parseInt(c);this.fireUpdate()},CQ_Analytics.SegmentMgr.prototype.resolveArray=function(a,b,c){b=b||CQ_Analytics.ClientContextMgr.get();if(!(a instanceof Array))return this.resolve(a,b);c="AND"==c?"AND":"OR";for(var d="AND"==c,e=0;e<a.length;e++){var g=this.resolve(a[e],b);if("AND"==c){if(!0!==g)return g}else if(!0===g)return!0}return d},CQ_Analytics.SegmentMgr.prototype.resolve=function(a,b){b=b||CQ_Analytics.ClientContextMgr.get();
if(!a)return!1;if(a instanceof Array)return this.resolveArray(a,b);if(0!=a.indexOf(this.SEGMENTATION_ROOT))return!1;if(a==this.SEGMENTATION_ROOT||!this.segments[a])return!0;var c=a.substring(0,a.lastIndexOf("/"));if(0==c.indexOf(this.SEGMENTATION_ROOT)&&(c=this.resolve(c,b),!0!==c))return c;c="function(clientcontext, contextcloud, clickstreamcloud) { return true "+(" \x26\x26 ( "+this.segments[a]+" ) ");c+=";}";try{var d=null;this.rulesCache=this.rulesCache||{};this.rulesCache[a]?d=this.rulesCache[a]:
(eval("f \x3d "+c),this.rulesCache[a]=d);var e=null==d||d(b,b,b)}catch(g){return"Unresolved - Error while evaluating segment "+a+" : "+g.message}return!0===e},CQ_Analytics.SegmentMgr.prototype.getResolved=function(a){a=a||CQ_Analytics.ClientContextMgr.get();var b=[],c;for(c in this.segments)!0===this.resolve(c,a)&&b.push(c);return b},CQ_Analytics.SegmentMgr.prototype.getMaxBoost=function(a,b){if(!(a instanceof Array))return this.getBoost(a);for(var c=0,d=0;d<a.length;d++){var e=a[d];!0===this.resolve(e,
b)&&(e=this.boosts[e]||0,e>c&&(c=e))}return c},CQ_Analytics.SegmentMgr.prototype.getBoost=function(a){a instanceof Array||(a=[a]);return this.boosts[a]||0},CQ_Analytics.SegmentMgr.prototype.reload=function(a){a||(a=this.SEGMENTATION_ROOT);if(a){-1==a.indexOf(this.SEGMENT_SELECTOR)&&(a+=this.SEGMENT_SELECTOR);try{a+=(-1===a.indexOf("?")?"?":"\x26")+"_\x3d"+(new Date).getTime(),CQ_Analytics.Utils.load(a,function(a,c,d){d&&d.responseText&&eval(d.responseText)},this),CQ.HTTP.get(scripts[i].src)}catch(b){}}},
CQ_Analytics.SegmentMgr.prototype.getSessionStore=function(){return this},CQ_Analytics.SegmentMgr.prototype.getProperty=function(a){return a},CQ_Analytics.SegmentMgr.prototype.getLink=function(a){return a+".html"},CQ_Analytics.SegmentMgr.prototype.getLabel=function(a){if(a){var b=a,c=b.lastIndexOf("/");-1!=c&&(b=b.substring(c+1,b.length));c=this.resolve(a);if(!0===c)return b;if(!0!==c)return'\x3cspan class\x3d"invalid" title\x3d"'+c+'" alt\x3d"'+c+'"\x3e'+b+"\x3c/span\x3e"}return a},CQ_Analytics.SegmentMgr.prototype.getPropertyNames=
function(){return this.getResolved()},CQ_Analytics.SegmentMgr=new CQ_Analytics.SegmentMgr,CQ_Analytics.SegmentMgr.loadSegments=function(a){CQ_Analytics.SegmentMgr.areSegmentsLoaded=!1;a&&0!==a.length?$CQ.ajax({url:CQ.shared.HTTP.externalize(a+this.SEGMENT_SELECTOR),dataType:"script",async:!0,cache:!0}).complete(function(){CQ_Analytics.SegmentMgr.areSegmentsLoaded=!0;CQ_Analytics.SegmentMgr.fireEvent("segmentsload")}):(CQ_Analytics.SegmentMgr.areSegmentsLoaded=!0,CQ_Analytics.SegmentMgr.fireEvent("segmentsload"))},
CQ_Analytics.SegmentMgr.renderer=function(a,b){if(a&&a.STORENAME==CQ_Analytics.SegmentMgr.STORENAME){var c=a.getPropertyNames(),d=[];d.push("\x3cdiv\x3e");for(var e=0;e<c.length;e++){var g=c[e];d.push('\x3cspan title\x3d"'+a.getProperty(g)+'" \x3e\x3ca href\x3d"'+CQ.shared.HTTP.externalize(a.getLink(g))+'"  title\x3d"'+a.getProperty(g)+'" \x3e'+a.getLabel(g)+"\x3c/a\x3e\x3c/span\x3e")}d.push("\x3c/div\x3e");$CQ("#"+b).children().remove();$CQ("#"+b).append(d.join(""))}},CQ_Analytics.ClientContextMgr.addListener("storeupdate",
CQ_Analytics.SegmentMgr.fireUpdate),CQ_Analytics.Utils.addListener(window,"unload",function(){try{for(var a in CQ_Analytics.SegmentMgr)delete CQ_Analytics.SegmentMgr[a]}catch(b){}CQ_Analytics.SegmentMgr=null}));
CQ_Analytics.PageDataMgr||(CQ_Analytics.PageDataMgr=function(){},CQ_Analytics.PageDataMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.PageDataMgr.prototype.STORENAME="pagedata",CQ_Analytics.PageDataMgr.prototype.FORCE_EXPERIENCE_COOKIE="cq-forceexperience",CQ_Analytics.PageDataMgr.prototype.init=function(){this.data={};for(var a in this.initProperty)this.data[a]=this.initProperty[a];this.initialized=!0;this.fireEvent("initialize",this);this.fireEvent("update")},CQ_Analytics.PageDataMgr.prototype.getLabel=
function(a){return a},CQ_Analytics.PageDataMgr.prototype.getLink=function(a){return""},CQ_Analytics.PageDataMgr.prototype.setExperience=function(a){CQ.shared.HTTP.setCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,a,"/")},CQ_Analytics.PageDataMgr.prototype.getExperience=function(){return CQ.shared.HTTP.getCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,"/")},CQ_Analytics.PageDataMgr.prototype.clearExperience=function(){CQ.shared.HTTP.clearCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,
"/")},CQ_Analytics.PageDataMgr=new CQ_Analytics.PageDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){this.loadInitProperties(CQ_Analytics.CCM.getInitialData(this.getName()));this.init();CQ_Analytics.CCM.register(this)},CQ_Analytics.PageDataMgr));
CQ_Analytics.BrowserInfo=function(){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},c=function(){if(b(/opera/))return{browserFamily:"Opera",browserVersion:""};if(b(/trident/)){var c={"7.0":"11","6.0":"10","5.0":"9","4.0":"8"},e=a.match(/trident\/([0-9\.]*)/),g="";e&&1<e.length&&(g=c[e[1]]);return{browserFamily:"IE",browserVersion:g}}return b(/edge/)?(e=a.match(/edge\/([0-9]*)/),g="",e&&1<e.length&&(g=e[1]),{browserFamily:"Edge",browserVersion:g}):b(/chrome/)?{browserFamily:"Chrome",
browserVersion:""}:b(/safari/)?b(/applewebkit\/4/)?{browserFamily:"Safari",browserVersion:"2"}:b(/version\/3/)?{browserFamily:"Safari",browserVersion:"3"}:b(/version\/4/)?{browserFamily:"Safari",browserVersion:"4"}:b(/version\/5/)?{browserFamily:"Safari",browserVersion:"5"}:b(/version\/6/)?{browserFamily:"Safari",browserVersion:"6"}:{browserFamily:"Safari",browserVersion:"7 or higher"}:b(/webkit/)?{browserFamily:"WebKit",browserVersion:""}:b(/msie/)?b(/msie 6/)?{browserFamily:"IE",browserVersion:"6"}:
b(/msie 7/)?{browserFamily:"IE",browserVersion:"7"}:b(/msie 8/)?{browserFamily:"IE",browserVersion:"8"}:b(/msie 9/)?{browserFamily:"IE",browserVersion:"9"}:b(/msie 10/)?{browserFamily:"IE",browserVersion:"10"}:{browserFamily:"IE",browserVersion:"11 or higher"}:b(/gecko/)?b(/rv:1\.8/)?{browserFamily:"Firefox",browserVersion:"2"}:b(/rv:1\.9/)?{browserFamily:"Firefox",browserVersion:"3"}:b(/rv:2.0/)?{browserFamily:"Firefox",browserVersion:"4"}:b(/rv:5./)?{browserFamily:"Firefox",browserVersion:"5"}:
b(/rv:6./)?{browserFamily:"Firefox",browserVersion:"6"}:b(/rv:7./)?{browserFamily:"Firefox",browserVersion:"7"}:b(/rv:8./)?{browserFamily:"Firefox",browserVersion:"8"}:b(/rv:9./)?{browserFamily:"Firefox",browserVersion:"9"}:{browserFamily:"Firefox",browserVersion:"10 or higher"}:b(/adobeair/)?{browserFamily:"Adobe AIR",browserVersion:""}:{browserFamily:"Unresolved",browserVersion:"Unresolved"}}.call();this.browserFamily=c.browserFamily;this.browserVersion=c.browserVersion;this.OSName=b(/windows 98|win98/)?
"Windows 98":b(/windows nt 5.0|windows 2000/)?"Windows 2000":b(/windows nt 5.1|windows xp/)?"Windows XP":b(/windows nt 5.2/)?"Windows Server 2003":b(/windows nt 6.0/)?"Windows Vista":b(/windows nt 6.1/)?"Windows 7":b(/windows nt 6.2/)?"Windows 8":b(/windows nt 6.3/)?"Windows 8.1":b(/windows nt 10.0/)?"Windows 10":b(/windows nt 4.0|winnt4.0|winnt/)?"Windows NT 4.0":b(/windows me/)?"Windows ME":b(/mac os x/)?b(/ipad/)||b(/iphone/)?"iOS":"Mac OS X":b(/macintosh|mac os/)?"Mac OS":b(/android/)?"Android":
b(/linux/)?"Linux":"Unresolved";this.deviceType=b(/ipad/)?"iPad":b(/iphone/)?"iPhone":b(/mobi/)?"Mobile":"Desktop";this.ua=a;/^https/i.test(window.location.protocol);this.screenResolution=screen.width+"x"+screen.height};
CQ_Analytics.BrowserInfo.prototype={getBrowserName:function(){return this.browserFamily+" "+this.browserVersion},getBrowserFamily:function(){return this.browserFamily},getBrowserVersion:function(){return this.browserVersion},getOSName:function(){return this.OSName},getScreenResolution:function(){return this.screenResolution},getDeviceType:function(){return this.deviceType},getUserAgent:function(){return this.ua},isMobile:function(a){a||(a=this.getDeviceType());a=a?a.toLowerCase():"desktop";return"desktop"!=
a},isIE:function(a){return"IE"==this.getBrowserFamily()&&(a?this.getBrowserVersion()==a:!0)},isIE6:function(){return this.isIE("6")},isIE7:function(){return this.isIE("7")},isIE8:function(){return this.isIE("8")},isIE9:function(){return this.isIE("9")}};CQ_Analytics.BrowserInfoInstance=new CQ_Analytics.BrowserInfo;
CQ_Analytics.MousePositionMgr||(CQ_Analytics.MousePositionMgr=function(){this.position={x:0,y:0};this.getPageX=function(a){var b=a.pageX;b||0===b||(b=a.clientX||0);return b};this.getPageY=function(a){var b=a.pageY;b||0===b||(b=a.clientY||0);return b};var a=this;this.timer=null;$CQ(document).bind("mousemove",function(b,c,d,e){if((b=b||window.event)&&!a.timer){var g=a.getPageX(b),h=a.getPageY(b);a.timer=setTimeout(function(){a.setPosition(g,h);a.timer=null},500)}});this.init()},CQ_Analytics.MousePositionMgr.prototype=
new CQ_Analytics.SessionStore,CQ_Analytics.MousePositionMgr.prototype.STORENAME="mouseposition",CQ_Analytics.MousePositionMgr.prototype.setPosition=function(a,b){this.position.x=a;this.position.y=b;this.fireEvent("update")},CQ_Analytics.MousePositionMgr.prototype.getProperty=function(a){return this.position[a]},CQ_Analytics.MousePositionMgr.prototype.getLabel=function(a){return a},CQ_Analytics.MousePositionMgr.prototype.getLink=function(a){return""},CQ_Analytics.MousePositionMgr.prototype.getPropertyNames=
function(){var a=[],b;for(b in this.position)a.push(b);return a},CQ_Analytics.MousePositionMgr.prototype.getSessionStore=function(){return this},CQ_Analytics.MousePositionMgr.prototype.getData=function(a){return this.position},CQ_Analytics.MousePositionMgr.prototype.clear=function(){this.position={}},CQ_Analytics.MousePositionMgr=new CQ_Analytics.MousePositionMgr,CQ_Analytics.CCM.register(CQ_Analytics.MousePositionMgr));
CQ_Analytics.ClientContext||(CQ_Analytics.ClientContext=new function(){return{get:function(a,b){if(a){0!=a.indexOf("/")&&(a="/"+a);var c=a.split("/")[1];a=a.substring(a.indexOf("/"+c)+c.length+2,a.length);if(c=CQ_Analytics.CCM.getRegisteredStore(c))return a&&(c=c.getProperty(a))&&b&&(c=CQ_Analytics.Variables.replaceVariables(c)),c}return null},set:function(a,b){if(a){0!=a.indexOf("/")&&(a="/"+a);var c=a.split("/")[1];a=a.substring(a.indexOf("/"+c)+c.length+2,a.length);(c=CQ_Analytics.CCM.getRegisteredStore(c))&&
a&&c.setProperty(a,b)}},clear:function(){var a=CQ_Analytics.CCM.getStores();if(a)for(var b in a)a[b].clear&&a[b].clear()},reset:function(){var a=CQ_Analytics.CCM.getStores();if(a)for(var b in a)a[b].reset&&a[b].reset()},persist:function(a){CQ_Analytics.ClientContextMgr.ServerStorage.post(a,!0)}}},window.ClientContext=CQ_Analytics.ClientContext,window.ContextCloud=CQ_Analytics.ClientContext);
CQ_Analytics.SurferInfoMgr||(CQ_Analytics.SurferInfoMgr=function(){},CQ_Analytics.SurferInfoMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.SurferInfoMgr.prototype.STOREKEY="SURFERINFO",CQ_Analytics.SurferInfoMgr.prototype.STORENAME="surferinfo",CQ_Analytics.SurferInfoMgr.prototype.init=function(){this.data={};for(var a in this.initProperty)this.data[a]=this.initProperty[a];this.initialized=!0;this.fireEvent("initialize",this);this.fireEvent("update")},CQ_Analytics.SurferInfoMgr.prototype.clear=
function(){this.data=null;this.initProperty={}},CQ_Analytics.SurferInfoMgr.prototype.getLabel=function(a){return a},CQ_Analytics.SurferInfoMgr.prototype.getLink=function(a){return""},CQ_Analytics.SurferInfoMgr=new CQ_Analytics.SurferInfoMgr,CQ_Analytics.CCM.addListener("configloaded",function(){var a=CQ_Analytics.BrowserInfoInstance;this.addInitProperty("browserFamily",a.getBrowserFamily());this.addInitProperty("browserVersion",a.getBrowserVersion());this.addInitProperty("browser","${/surferinfo/browserFamily} ${/surferinfo/browserVersion}");
this.addInitProperty("OS",a.getOSName());this.addInitProperty("resolution",a.getScreenResolution());this.addInitProperty("device",a.getDeviceType());this.addInitProperty("isMobile",a.isMobile());this.addInitProperty("userAgent",a.getUserAgent());var b=new Date;this.addInitProperty("day",b.getDate());this.addInitProperty("month",b.getMonth()+1);this.addInitProperty("year",b.getFullYear());this.addInitProperty("hours",b.getHours());this.addInitProperty("minutes",b.getMinutes());b="${/surferinfo/browserFamily}";
a.isMobile()&&(b="${/surferinfo/device}");this.addInitProperty("image",b);b=CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/surferinfo/resources/${/surferinfo/image}.png");this.addInitProperty("thumbnail",b);window.CQ_Analytics&&window.CQ_Analytics.MousePositionMgr&&CQ_Analytics.MousePositionMgr.addListener("update",function(){this.setProperty("mouse X",CQ_Analytics.MousePositionMgr.getProperty("x"));this.setProperty("mouse Y",CQ_Analytics.MousePositionMgr.getProperty("y"))},this);
this.addListener("update",function(){var b=this.getProperty("device"),d="${/surferinfo/browserFamily}";a.isMobile(b)&&(d="${/surferinfo/device}");this.getProperty("image")!=d&&this.setProperty("image",d)},this);this.init();CQ_Analytics.CCM.register(this)},CQ_Analytics.SurferInfoMgr));
CQ_Analytics.ProfileDataMgr||(CQ_Analytics.ProfileDataMgr=function(){this.addListener("beforepersist",function(){this.checkAuthorizableId()},this)},CQ_Analytics.ProfileDataMgr.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.ProfileDataMgr.prototype.STOREKEY="PROFILEDATA",CQ_Analytics.ProfileDataMgr.prototype.STORENAME="profile",CQ_Analytics.ProfileDataMgr.prototype.LOADER_PATH=CQ_Analytics.Utils.externalize("/libs/cq/personalization/components/profileloader/content/load.js",!0),CQ_Analytics.ProfileDataMgr.prototype.PROFILE_LOADER=
CQ_Analytics.Utils.externalize("/libs/cq/personalization/components/profileloader/content/load.json",!0),CQ_Analytics.ProfileDataMgr.prototype.init=function(){this.persistence=new CQ_Analytics.SessionPersistence({container:"ClientContext"});var a=this.persistence.get(this.getStoreKey());if(a&&""!=a)this.data=this.parse(a);else{this.data={};for(var b in this.initProperty)this.data[b]=this.initProperty[b]}this.persist();this.initialized=!0;this.fireEvent("initialize",this);this.fireEvent("update")},
CQ_Analytics.ProfileDataMgr.prototype.checkAuthorizableId=function(){this.data||this.init();this.data.authorizableId?CQ_Analytics.CCM.setVisitorId(this.data.authorizableId):CQ_Analytics.CCM.setVisitorId("")},CQ_Analytics.ProfileDataMgr.prototype.getLabel=function(a){return a},CQ_Analytics.ProfileDataMgr.prototype.getLink=function(a){return""},CQ_Analytics.ProfileDataMgr.prototype.clear=function(){this.persistence&&this.persistence.remove(this.getStoreKey());this.data=null;this.initProperty={}},CQ_Analytics.ProfileDataMgr.prototype.getLoaderURL=
function(){return CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/profiledata/loader.json")},CQ_Analytics.ProfileDataMgr.prototype.loadProfile=function(a){var b=this.getLoaderURL();b=CQ_Analytics.Utils.addParameter(b,"authorizableId",a);try{var c=CQ.shared.HTTP.eval(b);if(c){this.data={};for(var d in c)this.data[d]=c[d];this.persist();this.fireEvent("initialize",this);this.fireEvent("update");CQ_Analytics.ClickstreamcloudEditor&&CQ_Analytics.ClickstreamcloudEditor.reload();return!0}}catch(e){console&&
console.log&&console.log("Error during profile loading",e)}return!1},CQ_Analytics.ProfileDataMgr=new CQ_Analytics.ProfileDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){this.checkAuthorizableId();this.addListener("update",function(a,b){if("birthday"==b||!b){a=this.getProperty("birthday");b=this.getProperty("age");var c="";if(a)try{var d=function(a){var b=new Date(a.getFullYear(),0,0);b=new Date(b.getTime());b.setUTCHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds());
return(b.getTime()-a.getTime())/864E5*-1},e=new Date(Date.parse(a));if(isNaN(e.getTime()))c="";else{var g=new Date;if(d(e)==d(g)&&e.getMonth()==g.getMonth())c=CQ.shared.HTTP.externalize(CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/profiledata/resources/birthday_cake.png"));else{var h=g.getFullYear()-e.getFullYear();c=d(e)>d(g)?h:Math.max(0,h-1)}}}catch(f){c=""}b!=c&&this.setProperty("age",c)}});CQ_Analytics.CCM.register(this)},CQ_Analytics.ProfileDataMgr));