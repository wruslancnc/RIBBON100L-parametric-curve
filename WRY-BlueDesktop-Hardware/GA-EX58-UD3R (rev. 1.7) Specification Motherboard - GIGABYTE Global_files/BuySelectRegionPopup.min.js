(()=>{"use strict";var m={};class c{constructor(){this.events={}}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}publish(e,...t){this.events[e]&&this.events[e].forEach(n=>{n(...t)})}}class s{constructor(e){if(e.gcModal===void 0)this.init(e);else return e.gcModal}open(){this.handleMouseDownFn=this.handleMouseDown.bind(this),this.handleMouseUpFn=this.handleMouseUp.bind(this),this.el.addEventListener("mousedown",this.handleMouseDownFn),this.el.addEventListener("mouseup",this.handleMouseUpFn);const e=l();document.body.style.marginLeft=`-${e}px`,document.body.style.width=`calc(100% + ${e}px)`,document.body.style.overflow="hidden",this.el.classList.toggle("modal-open",!0),this.el.classList.toggle("modal-close",!1),this.isOpen=!0}close(){document.body.style.removeProperty("margin-left"),document.body.style.removeProperty("width"),document.body.style.removeProperty("overflow"),this.el.classList.toggle("modal-open",!1),this.el.classList.toggle("modal-close",!0),this.el.removeEventListener("mousedown",this.handleMouseDownFn),this.el.removeEventListener("mouseup",this.handleMouseUpFn),this.isOpen=!1,this.event.publish("close")}on(e,t){this.event.on(e,t)}onClickBackDrop(e){e.target===this.el&&this.close()}handleMouseDown(e){this.clickTarget=e.target}handleMouseUp(e){e.button===0&&this.clickTarget===this.el&&this.close()}init(e){this.el=e,this.clickTarget=void 0,this.isOpen=!1,this.event=new c,this.el.querySelectorAll('[gc-close="modal"]').forEach(t=>{t.addEventListener("click",()=>{this.close()})}),e.gcModal=this}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('[gc-toggle="modal"]').forEach(o=>{const e=o.getAttribute("gc-target"),t=new s(document.querySelector(e));o.addEventListener("click",()=>{t.open()})})});function l(){return window.innerWidth-document.body.clientWidth}const d=s,a=".js-modalPopup-BuySelectRegion",r="js-globalBuyPopUp-Button",i="js-SlideUpDownMen-Area";document.addEventListener("DOMContentLoaded",()=>{p(),h(),u()});function u(){const o=$(`.${i}`);o.length>=2&&o.trigger("click")}function h(){$(`.${i}`).off("click").click(function(){$(this).next().slideToggle(),$(this).find(".js-SlideUpDownMen-icon").toggleClass("Rotate270")})}function p(){$(document).on("click",`.${r}`,function(){const e=o($(this));if(e.length){const t=e.attr("js-data-ProductName"),n=e.attr("js-data-version");if(typeof t!="undefined"&&t!==""&&$(".js-PopUpHeader-ProductName").text(t),typeof n!="undefined"&&n!==""){const f=`(rev.${n})`;$(".js-PopUpHeader-Version").text(f)}}g()});function o(e){return e.attr("data-wtb-pop-page")==="listPage"?e.parents(".product_list_box_info_down").find(".js-data-ProductNameAndVersion"):$(".js-data-ProductNameAndVersion")}}function g(){new d(document.querySelector(a)).open()}})();
